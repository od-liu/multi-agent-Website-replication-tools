# 首页（查询页）初始需求文档
# 这是提供给 UI Analyzer Agent 的输入文档
# Agent 会自动获取截图、图片资源和交互场景截图

# ⚠️ 使用说明：
# 1. 如果某个组件需要交互场景截图，请在 description 中添加 "**交互场景截图**:" 字段
# 2. Agent 会按照 steps 中定义的步骤自动执行交互并截图
# 3. 支持的 action 类型: type, click, wait, wait_for_element, screenshot, evaluate 等

- id: REQ-HOME-PAGE
  name: 首页（车票查询页）
  description: |
    用户进入系统后的首页，主要功能是车票查询。
    
    **网站地址**: http://localhost:5173/
    **页面宽度参考**: 1920px
    **页面标识**: homepage
    
    **需要的图片资源**:
    - Logo（顶部导航）（可以直接拷贝login-page的相同资源）
    - 导航菜单图标（如有）
    - 背景图片（查询表单区域）
    - 宣传图片（4个快捷入口：会员服务、铁路保险、餐饮特产、计次定期票）
    - 底部导航的友情链接和二维码（可以直接拷贝login-page的相同资源）
    
    **主要功能**：
    - 用户可以查询车票（出发地、目的地、日期）
    - 显示常用功能快捷入口
    - 显示宣传内容和推广信息
    - 提供登录/注册入口（如未登录）
    - 显示用户信息（如已登录）
  
  dependencies: []
  scenarios: []
  
  children:
    - id: REQ-HOME-TOP-NAV
      name: 顶部导航栏
      description: |
        页面顶部导航栏，包含Logo、主导航菜单和用户信息区。（与登录页顶部导航区域布局相同，建议保持两页面有关组件风格一致，并丰富顶部导航功能）
        
        **需要截图**: 是
        **组件定位**: 页面最上方，横向占据整个页面宽度，高度约80-100px
        **定位提示**: header, nav, .header, .top-nav, [role="banner"]
        
        **功能要求**：
        - 显示12306品牌Logo
        - 显示主导航菜单（首页、车票、订单、我的12306等）
        - 显示用户登录/注册入口（未登录状态）
        - 显示用户名和退出按钮（已登录状态）
        - Logo点击返回首页
      
      dependencies: []
      
      scenarios:
        # 1.3.1 用户需要登录12306账户
        - name: 用户未登录点击登录按钮且系统响应
          given: 用户在首页/查询页
          when: 用户点击"登录"按钮，用户未登录12306账户，系统成功响应
          then: 系统在100毫秒内跳转至登录页
          
        - name: 用户未登录点击登录按钮但系统未响应
          given: 用户在首页/查询页
          when: 用户点击"登录"按钮，用户未登录12306账户，系统未成功响应
          then: 系统未在100毫秒内跳转至登录页，且提示"登录失败，请稍后重试"
          
        # 1.3.2 用户需要注册12306账户
        - name: 用户未注册点击注册按钮且系统响应
          given: 用户在首页/查询页
          when: 用户点击"注册"按钮，用户未注册12306账户，系统成功响应
          then: 系统在100毫秒内跳转至注册页
          
        - name: 用户未注册点击注册按钮但系统未响应
          given: 用户在首页/查询页
          when: 用户点击"注册"按钮，用户未注册12306账户，系统未成功响应
          then: 系统未在100毫秒内跳转至注册页，且提示"注册失败，请稍后重试"
          
        # 1.3.3 用户已登录12306账号
        - name: 用户已登录12306账号
          given: 用户在首页/查询页
          when: 用户已登录12306账户
          then: 系统在顶部导航栏仅显示"个人中心"入口，不显示"登录"和"注册"入口
          
        # 1.4.1 用户已登录前往个人中心
        - name: 已登录用户点击个人中心且系统响应
          given: 用户在首页/查询页
          when: 用户点击"个人中心"入口，用户已登录12306账户，系统成功响应
          then: 系统在100毫秒内跳转至该用户账号对应的个人中心页
          
        - name: 已登录用户点击个人中心但系统未响应
          given: 用户在首页/查询页
          when: 用户点击"个人中心"入口，用户已登录12306账户，系统未成功响应
          then: 系统未在100毫秒内跳转至该用户账号对应的个人中心页，且提示"前往个人中心失败，请稍后重试"
          
        # 1.4.2 用户未登录前往个人中心
        - name: 未登录用户点击个人中心且系统响应
          given: 用户在首页/查询页
          when: 用户点击"个人中心"入口，用户未登录12306账户，系统成功响应
          then: 系统在100毫秒内跳转至登录页
          
        - name: 未登录用户点击个人中心但系统未响应
          given: 用户在首页/查询页
          when: 用户点击"个人中心"入口，用户未登录12306账户，系统未成功响应
          then: 系统未在100毫秒内跳转至登录页，且提示"请先登录12306账号！"
          
        # 1.5 用户在首页/查询页点车票查询页快捷入口
        - name: 用户点击车票查询入口且系统响应
          given: 用户在首页/查询页
          when: 用户点击"车票查询"入口，系统成功响应
          then: 系统在100毫秒内跳转至车票查询页
          
        - name: 用户点击车票查询入口但系统未响应
          given: 用户在首页/查询页
          when: 用户点击"车票查询"入口，系统未成功响应
          then: 系统未在100毫秒内跳转至车票查询页，且提示"查询失败，请稍后重试"
      
      children: []
    
    - id: REQ-HOME-SEARCH-FORM
      name: 车票查询表单
      description: |
        用户输入查询条件的表单，是首页的核心功能。
        
        **需要截图**: 是
        **组件定位**: 页面中上部分，通常在背景图片上，居中显示
        **定位提示**: form, .search-form, .ticket-query, [class*="search"]
        
        **功能要求**：
        - 支持出发地输入（城市/车站名称，带自动补全）
        - 支持目的地输入（城市/车站名称，带自动补全）
        - 支持出发地和目的地互换按钮
        - 支持出发日期选择（日期选择器）
        - 支持学生票、残军票等选项（可选）
        - 提供"查询"按钮
        - 提供"高铁/动车"、"普通列车"等车型选择（可选）
        
        **交互场景截图**:
          - name: "前端验证-出发地为空"
            description: "测试不输入出发地直接点击查询"
            steps:
              - action: click
                target: "查询按钮"
                target_hint: "button:has-text('查询'), a:has-text('查询'), input[type='submit']"
              - action: wait
                duration: 0.5
              - action: screenshot
                filename: "车票查询表单-错误-出发地为空.png"
                
          - name: "前端验证-目的地为空"
            description: "测试只输入出发地不输入目的地"
            steps:
              - action: evaluate
                script: |
                  const fromInput = document.querySelector('input[placeholder*="出发"], input[name*="from"], input[id*="from"]');
                  if (fromInput) fromInput.value = '';
              - action: type
                target: "出发地输入框"
                target_hint: "input[placeholder*='出发'], input[name*='from']"
                value: "北京"
              - action: wait
                duration: 0.5
              - action: click
                target: "查询按钮"
                target_hint: "button:has-text('查询'), a:has-text('查询')"
              - action: wait
                duration: 0.5
              - action: screenshot
                filename: "车票查询表单-错误-目的地为空.png"
                
          - name: "日期选择器展开"
            description: "测试点击日期输入框展开日期选择器"
            steps:
              - action: type
                target: "出发城市输入框"
                target_hint: "input[placeholder*='出发'], input[name*='from']"
                value: "北京"
              - action: type
                target: "到达城市输入框"
                target_hint: "input[placeholder*='出发'], input[name*='from']"
                value: "上海"
              - action: click
                target: "日期输入框"
                target_hint: "input[placeholder*='日期'], input[type='date'], input[name*='date']"
              - action: wait
                duration: 1
              - action: screenshot
                filename: "车票查询表单-日期选择器展开.png"
      
      dependencies: []
      
      scenarios:
        # 1.2.1 校验用户输入的出发地是否为空
        - name: 校验出发地为空
          given: 用户在首页/查询页且未在车票查询表单中输入出发地
          when: 用户在车票查询表单中点击"查询"
          then: 查询按钮上方出现系统提示"请选择出发城市"，文字颜色#d32f2f（红色），字体大小13px，内边距10px 0px，背景#ffebee（浅红色），居中对齐
          
        # 1.2.2 校验用户输入的到达地是否为空
        - name: 校验到达地为空
          given: 用户在首页/查询页且未在车票查询表单中输入到达地
          when: 用户在车票查询表单中点击"查询"
          then: 查询按钮上方出现系统提示"请选择到达城市"，文字颜色#d32f2f（红色），字体大小13px，内边距10px 0px，背景#ffebee（浅红色），居中对齐
          
        # 1.2.3 校验用户输入的出发地和到达地是否合法
        - name: 出发地不在数据库城市列表中
          given: 用户在首页/查询页的车票查询表单中输入了一个不在数据库的城市作为出发地或到达地
          when: 用户在车票查询表单中点击"查询"
          then: 查询按钮上方出现系统提示"无法匹配该出发城市"或"无法匹配该到达城市"，文字颜色#d32f2f（红色），字体大小13px，内边距10px 0px，背景#ffebee（浅红色），居中对齐
          
        # 1.2.5 合法出发地推荐
        - name: 合法出发地推荐
          given: 用户在首页/查询页
          when: 用户在车票查询表单中点击出发地输入框
          then: 系统在出发地下拉条目中显示数据库中的所有站点
          
        # 1.2.6 合法到达地推荐
        - name: 合法到达地推荐
          given: 用户在首页/查询页
          when: 用户在车票查询表单中点击到达地输入框
          then: 系统在到达地下拉条目中显示数据库中的所有站点
          
        # 1.2.7 合法出发日期推荐
        - name: 合法出发日期推荐
          given: 用户在首页/查询页
          when: 用户在车票查询表单中点击出发日期选择框
          then: 系统在出发日期下拉条目中显示日历，用户可以选择已放票的日期，不能选择已过期或未开票的日期
          
        # 1.2.8 出发地/到达地交换
        - name: 出发地到达地交换
          given: 用户在首页/查询页的车票查询表单中已选择出发地或到达地
          when: 用户点击交换按钮
          then: 系统交换出发地和到达地的输入框内容
          
        # 1.2.9 出发日期自动填入当前日期
        - name: 出发日期自动填入当前日期
          given: 用户在车票查询页面
          when: 用户未输入出发日期或还未进行输入出发日期操作
          then: 系统在出发日期自动填入当前日期
          
        # 1.2.10 用户成功查询且系统响应
        - name: 查询成功且系统响应
          given: 用户在首页/查询页的车票查询表单中输入了正确的出发地、到达地、出发日期
          when: 用户点击"查询"按钮且系统成功响应
          then: 系统在100毫秒内成功跳转至车次列表页，且显示符合用户选择的出发地、到达地、出发日期且是否为高铁/动车的所有车次信息
          
        # 1.2.10 用户成功查询但系统未响应
        - name: 查询失败系统未响应
          given: 用户在首页/查询页的车票查询表单中输入了正确的出发地、到达地、出发日期
          when: 用户点击"查询"按钮但系统未成功响应
          then: 查询按钮上方出现系统提示"查询失败，请稍后重试"，文字颜色#d32f2f（红色），字体大小13px，内边距10px 0px，背景#ffebee（浅红色），居中对齐，系统停留在当前页面且保持已输入的出发地、到达地、出发日期
      
      children: []
    
    - id: REQ-HOME-PROMOTION
      name: 宣传推广区域
      description: |
        首页的宣传内容和快捷入口区域。
        
        **需要截图**: 是
        **组件定位**: 位于查询表单下方，通常为4个卡片横向排列
        **定位提示**: .promotion, .quick-entry, .service-list, [class*="promo"]
        
        **功能要求**：
        - 显示4个快捷入口卡片（会员服务、铁路保险、餐饮特产、计次定期票）
        - 每个卡片包含图片、标题和描述
        - 点击卡片跳转到对应功能页面
        - 卡片悬停时有视觉反馈
      
      dependencies: []
      scenarios: []
      children: []
    
    - id: REQ-HOME-BOTTOM-NAV
      name: 底部导航
      description: |
        页面底部的友情链接和二维码展示区域（与登录页共用,可以参考登录页对应组件实现）。
        
        **需要截图**: 是
        **组件定位**: 页面最底部，横向占据整个页面宽度
        **定位提示**: footer, [role="contentinfo"]
        
        **布局结构**：
        - 上半部分：左右并排布局
          * 左侧：友情链接区域（标题 + 4个合作伙伴Logo，2行2列排列）
          * 右侧：二维码区域（4个官方平台二维码，横向排列）
        - 下半部分：版权信息区域（深灰色背景，包含版权声明、技术支持和ICP备案信息）
        
        **功能要求**：
        - 显示友情链接（合作伙伴Logo）
        - 显示四个官方平台二维码
        - 提供扫码关注入口
        - 显示版权和备案信息
      
      dependencies: []
      scenarios: []
      children: []

