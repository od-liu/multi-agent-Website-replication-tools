# UI 调整迭代日志

## Iteration 1（Payment）
- **差异点**（按优先级：缺失/多余 > 位置和尺寸 > 颜色 > 其他）：
  1. **保险广告区域出现“文字重复”**：参考图中保险广告本身已包含完整文字与按钮；复刻页叠加了额外 HTML 文本导致重复显示（订单信息区域 - **缺失/多余元素**）。
  2. **订单信息/按钮/温馨提示未形成同一块内容容器**：参考图中三者位于同一边框容器内；复刻页此前为分散结构导致边框/留白不一致（主内容中部 - **位置和尺寸**）。
  3. **车次信息行的字体/层级与参考图不一致**：参考图中日期/站点/到开时间字号更大、站名为蓝色强调；复刻页存在样式覆盖风险（订单信息区域顶部 - **位置和尺寸/颜色**）。
  4. **温馨提示链接样式不一致**：参考图为蓝色链接（如“退改说明”）且非强制下划线；复刻页为更亮蓝并始终下划线（温馨提示区域 - **颜色/其他**）。
  5. **按钮区尺寸/间距与参考图不一致**：参考图按钮宽高与间距更紧凑；复刻页此前偏大（按钮区域 - **位置和尺寸**）。

- **从目标参考图片分析的信息**（基于 `requirements/images/payment` 截图）：
  - **保险广告**：图片本身包含标题、说明、链接与“添加保障”按钮文字；因此应 **使用图片**，避免再叠加文字。
  - **整体结构**：订单信息块下方紧接按钮区和温馨提示区，并处于同一外边框容器中。

- **修复内容**：
  - **修改文件**：
    - `frontend/src/components/Payment/PaymentOrderInfo.tsx`
    - `frontend/src/components/Payment/PaymentOrderInfo.css`
    - `frontend/src/pages/PaymentPage.tsx`
    - `frontend/src/pages/PaymentPage.css`
    - `frontend/src/components/Payment/PaymentSubmit.css`
    - `frontend/src/components/Payment/PaymentCountdown.css`
  - **修复的差异点**：
    - 保险广告改为 **仅渲染图片**（移除重复 HTML 文本），并保留 `alt` 说明。
    - 将 `PaymentOrderInfo` + `PaymentSubmit` + 温馨提示包进 `payment-order-section`，统一边框/圆角/溢出行为。
    - 车次信息行使用更高特异性类名，降低被其他样式覆盖的概率（站名蓝色强调）。
    - 温馨提示链接色调整为 `#0066CC`，hover 下划线。
    - 按钮宽高与间距回调更接近参考图（160/220 宽、44 高、gap 70）。

- **验证结果**：已修复（保险区文字重复已消失；整体结构更接近参考图）
- **剩余问题**：
  - 由于当前订单数据（车次/日期/票价）与参考图不一致，仍可能存在细微的对齐/字号差异需要下一轮迭代继续微调。

## Iteration 2（Payment）
- **差异点**（按优先级：缺失/多余 > 位置和尺寸 > 颜色 > 其他；不包含顶部栏/底部栏）：
  1. **倒计时横幅外框样式不一致**：参考图为白底、蓝色边框的提示框；复刻页之前为浅蓝底（页面正文顶部 - **颜色/边框**）。
  2. **订单信息整体容器外观不一致**：参考图整体更接近“直角边框容器”；复刻页此前为圆角且宽度偏宽（订单信息块 - **位置和尺寸**）。
  3. **按钮区域尺寸/间距不一致**：参考图按钮更“紧凑且居中”，复刻页此前按钮宽高/间距不一致（按钮区域 - **位置和尺寸**）。
  4. **温馨提示字号/行高/列表间距不一致**：参考图整体更紧凑；复刻页此前字号偏大、行距偏松（温馨提示区域 - **位置和尺寸**）。
  5. **截图出现“导航栏重复”现象**：复刻页顶部栏使用 sticky 时，长页面 fullPage 截图会把顶部栏在中段重复渲染，影响对比（截图中部 - **多余元素/验证噪声**）。

- **从原网页提取的信息**（用于精确对齐，来源：`https://kyfw.12306.cn/otn/payOrder/init?...`）：
  - **锁定提示图标**：为背景图（`.i-lock`）尺寸约 **42×42**，背景图资源为 `bg02.png`（非纯文字）。
  - **锁定提示区域**：外层 `.t-succ.t-lock` 为 **1px 蓝色边框**，提示框宽约 **980px**，内层 `.pay-tips` 有 **padding-left: 45px**。
  - **按钮基础样式**：`.btn92` 高约 **30px**、圆角 **4px**；取消按钮白底灰边；支付按钮橙色底。

- **修复内容**：
  - **修改文件**：
    - `frontend/src/pages/PaymentPage.css`
    - `frontend/src/components/Payment/PaymentCountdown.css`
    - `frontend/src/components/Payment/PaymentSubmit.css`
  - **修复的差异点**：
    - 倒计时横幅改为白底 + 蓝边框 + 42px 图标，并收敛到参考图的横幅风格。
    - 主内容区 `max-width` 调整为 **980px**，并将订单容器圆角改为直角以贴近参考图。
    - 温馨提示区域缩小字号/行距/条目间距，版式更接近参考图的紧凑度。
    - 支付按钮区域回调为更符合参考图的视觉比例（按钮宽高与间距更合理）。
    - 顶部栏取消 sticky，避免 fullPage 截图时出现“重复导航栏”影响对比（不改变顶部栏视觉，仅改变滚动定位方式）。

- **验证结果**：部分修复（主容器宽度、倒计时横幅、按钮区与温馨提示更接近参考图；截图对比噪声显著降低）
- **剩余问题**：
  - 倒计时横幅内文字与图标的水平对齐/左右留白仍可继续微调（尤其是与参考图左侧 45px 内缩的精确一致性）。
  - 保险卡片为图片实现，受当前订单数据影响不大，但与参考图在纵向间距上可能仍有 2-6px 的细微差异，建议下一轮继续像素级微调。

## Iteration 3（Payment）
- **差异点**（按优先级：缺失/多余 > 位置和尺寸 > 颜色 > 其他；不包含顶部栏/底部栏；聚焦车次信息+表格+按钮）：
  1. **车站名颜色不一致**：参考/官方为黑色粗体；复刻页此前为蓝色强调（订单信息区域顶部车次行 - **颜色**）。
  2. **车次行“到达时间”字号/粗细不一致**：参考/官方右侧到达时间更小更轻；复刻页此前整段都为 16px 粗体（车次行右侧 - **位置和尺寸/字体层级**）。
  3. **表格分割线样式不一致**：参考/官方表格弱化竖线、主要呈现横向分割；复刻页此前每个单元格都有明显竖线（乘客信息表格 - **边框/样式**）。
  4. **表格表头/数据行底色不一致**：参考/官方表头白底、数据行浅蓝底；复刻页此前表头偏灰蓝且数据行白底（乘客信息表格 - **颜色**）。
  5. **按钮尺寸不一致**：参考/官方按钮为 92×30，文字 12px；复刻页此前按钮更大且间距更宽（按钮区域 - **位置和尺寸**）。

- **从原网页提取的信息**（用于精确对齐，来源：`https://kyfw.12306.cn/otn/payOrder/init?...`）：
  - **车次行层级**：容器本身为 12px/30px 行高，但关键字段（日期/车次/车站名/出发段）为 16px 粗体；右侧到达时间更轻更小。
  - **表格**：外框约 1px 深灰；表头白底；数据行浅蓝底；弱化/去除竖向分割线，主要使用横向分割。
  - **按钮**：取消/支付按钮均为 **92×30**，圆角 **4px**；取消按钮白底灰边，支付按钮橙底白字，均为 **12px** 字号。

- **修复内容**：
  - **修改文件**：
    - `frontend/src/components/Payment/PaymentOrderInfo.tsx`
    - `frontend/src/components/Payment/PaymentOrderInfo.css`
    - `frontend/src/components/Payment/PaymentSubmit.css`
  - **修复的差异点**：
    - 车次行车站名颜色从蓝色调整为黑色粗体，并将“到达时间”拆分为更小更轻的样式以匹配官方层级。
    - 表格表头改白底、数据行改浅蓝底；去除竖向分割线，仅保留主要横向分割线与外框。
    - 支付/取消按钮尺寸调整为 92×30、12px 字号，并缩小按钮间距以贴近官方视觉。

- **验证结果**：已修复（车次信息/表格/按钮在截图局部对比中与参考/官方样式显著一致）
- **剩余问题**：
  - 表格列宽与官方通过 `width` 属性精确控制；复刻页当前使用自适应列宽，在不同数据长度下可能产生轻微差异（非核心视觉问题）。
